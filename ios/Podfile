platform :ios, '16.0'
project 'CommunityCapital/CommunityCapital.xcodeproj'
use_frameworks!

target 'CommunityCapital' do
  # Payments
  pod 'Stripe', '24.19.0'   # pin this; CocoaPods will pull StripeCore/Payments/PaymentsUI/UICore at the same version
  pod 'Plaid'

  # Firebase
  pod 'Firebase/Auth'
  pod 'Firebase/Firestore'
  pod 'Firebase/Analytics'

  # UI/UX
  pod 'lottie-ios'
  pod 'SnapKit'

  # Networking
  pod 'Alamofire'

  # Analytics
  pod 'Mixpanel-swift'

  target 'CommunityCapitalTests' do
    inherit! :search_paths
    pod 'Quick'
    pod 'Nimble'
  end
end

# Keep this post_install (updated a bit)
post_install do |installer|
  installer.pods_project.targets.each do |t|
    t.build_configurations.each do |config|
      # Silence "double-quoted include" diag (safe for pods)
      config.build_settings['CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER'] = 'NO'
      # Don't escalate warnings to errors in Pods
      config.build_settings['GCC_TREAT_WARNINGS_AS_ERRORS']   = 'NO'
      config.build_settings['SWIFT_TREAT_WARNINGS_AS_ERRORS'] = 'NO'
      # Make sure pods compile with Swift 5 (not Swift 6 mode)
      config.build_settings['SWIFT_VERSION'] = '5.0'
      # Avoid stricter new checks that can bite pods
      config.build_settings['ENABLE_MODULE_VERIFIER'] = 'NO'
      config.build_settings['BUILD_LIBRARY_FOR_DISTRIBUTION'] = 'NO'
      # Intel Mac sim build ergonomics
      config.build_settings['EXCLUDED_ARCHS[sdk=iphonesimulator*]'] = 'arm64'
    end
  end
end
